<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Who Is Awake?</title>

	<script src="./jsLibraries/luxon.js"></script>
	<script src="./jsLibraries/papaparse.js"></script>
	<script src="./jsLibraries/jquery-3.7.1.min.js"></script>
</head>
<body>
	<h2>Approximately</h2>
	<h1 id="percentageHeader">n%</h1>
	

	<script>

		let weekdayLogArray = [["Time","Sleep and rest","Personal care","Paid work","Travel","Unpaid household work","Unpaid care","Watching television","Entertainment and leisure","Education and study","Other"],["04:00","97.1","0.9","0.7","0.1","0.2","0.1","0.2","0.3","0.0","0.4"],["04:10","97.1","0.8","0.7","0.1","0.2","0.1","0.2","0.3","0.0","0.4"],["04:20","97.1","0.9","0.7","0.1","0.2","0.1","0.2","0.4","0.0","0.4"],["04:30","96.6","0.9","0.7","0.1","0.4","0.1","0.2","0.4","0.0","0.5"],["04:40","96.3","1.1","0.7","0.2","0.3","0.1","0.2","0.4","0.0","0.5"],["04:50","96.0","1.3","0.7","0.2","0.3","0.1","0.3","0.4","0.0","0.5"],["05:00","94.4","2.0","0.8","0.4","0.7","0.1","0.3","0.7","0.0","0.5"],["05:10","94.3","1.9","0.8","0.5","0.9","0.1","0.3","0.7","0.0","0.5"],["05:20","93.7","2.2","0.8","0.6","0.7","0.1","0.3","0.7","0.0","0.8"],["05:30","91.6","3.2","1.0","1.1","0.8","0.2","0.3","0.8","0.0","0.9"],["05:40","90.7","3.5","1.1","1.7","0.8","0.2","0.4","0.9","0.0","0.7"],["05:50","90.0","3.4","1.6","1.7","0.9","0.2","0.4","1.1","0.0","0.7"],["06:00","82.5","7.7","2.5","1.3","2.4","0.6","0.4","1.8","0.1","0.7"],["06:10","80.7","7.8","2.6","1.7","3.0","0.5","0.5","2.2","0.1","1.0"],["06:20","78.5","9.0","2.8","2.0","3.2","0.6","0.5","2.6","0.1","0.7"],["06:30","71.0","13.7","3.5","2.6","4.4","0.9","0.5","3.2","0.0","0.3"],["06:40","69.1","14.5","3.6","2.7","4.7","1.1","0.6","3.5","0.0","0.2"],["06:50","67.8","14.0","4.1","3.0","5.1","1.1","1.1","3.6","0.0","0.2"],["07:00","52.6","21.5","5.8","4.2","8.3","2.2","1.0","3.9","0.0","0.5"],["07:10","50.4","21.0","6.4","4.8","8.5","2.3","1.3","4.7","0.1","0.5"],["07:20","48.7","20.5","6.8","5.8","8.8","2.4","1.3","5.1","0.1","0.6"],["07:30","40.6","23.3","8.6","7.4","10.2","2.4","1.4","5.5","0.0","0.6"],["07:40","38.9","22.9","9.5","8.9","9.8","2.5","1.5","5.5","0.1","0.4"],["07:50","37.6","22.1","10.9","9.4","9.7","2.7","1.7","5.2","0.1","0.6"],["08:00","26.4","24.7","16.3","10.0","11.3","2.7","1.6","5.8","0.3","0.8"],["08:10","24.8","24.7","17.5","10.3","11.2","2.7","1.6","6.5","0.3","0.5"],["08:20","23.3","22.8","19.1","11.1","11.7","2.7","1.6","6.7","0.3","0.7"],["08:30","18.3","22.5","24.2","11.8","11.5","1.9","1.4","7.5","0.3","0.6"],["08:40","17.6","21.1","26.0","11.4","11.1","1.5","2.1","7.9","0.4","0.8"],["08:50","17.0","19.3","27.7","10.5","12.4","1.7","2.0","8.4","0.4","0.7"],["09:00","11.3","17.5","34.4","7.5","15.2","1.7","2.2","7.7","1.7","0.9"],["09:10","10.6","16.9","35.8","6.6","16.2","1.7","2.1","7.8","1.6","0.7"],["09:20","10.4","15.6","36.9","6.3","16.3","1.6","2.1","8.5","1.6","0.8"],["09:30","8.2","13.5","38.7","6.0","18.3","1.4","2.4","8.9","1.7","1.0"],["09:40","8.2","12.9","39.4","5.4","18.2","1.5","2.2","9.3","1.7","1.1"],["09:50","8.1","11.8","39.4","5.6","18.4","1.9","2.4","9.7","1.8","1.1"],["10:00","5.9","12.3","40.2","5.5","19.4","1.7","2.3","10.0","1.8","1.0"],["10:10","5.6","11.1","40.5","5.6","19.7","2.0","2.6","10.0","2.0","0.9"],["10:20","5.3","10.7","40.8","5.2","19.6","2.1","2.5","10.7","2.0","1.0"],["10:30","4.6","10.0","40.6","6.6","19.1","2.4","2.3","11.3","2.1","1.0"],["10:40","4.6","9.3","41.3","6.1","19.9","2.5","2.2","10.6","2.3","1.1"],["10:50","4.7","8.9","41.4","5.6","20.4","2.6","2.1","10.8","2.4","1.1"],["11:00","3.5","9.8","41.0","6.7","21.0","2.4","1.7","10.8","2.2","0.9"],["11:10","3.3","10.0","41.1","5.8","21.7","2.1","1.9","10.9","2.4","0.9"],["11:20","3.3","9.6","41.1","6.0","22.2","2.1","1.8","10.6","2.2","1.0"],["11:30","2.9","8.4","41.0","6.6","22.6","2.0","2.1","11.1","2.2","1.0"],["11:40","2.9","8.8","40.8","6.1","22.7","2.1","2.1","11.3","2.2","0.9"],["11:50","2.9","8.7","40.8","5.9","23.0","2.3","2.2","11.1","2.2","0.9"],["12:00","2.2","12.4","37.1","5.8","23.8","2.4","2.7","10.5","2.1","1.0"],["12:10","2.0","14.0","36.8","5.3","22.9","2.2","2.7","10.9","2.2","1.0"],["12:20","1.9","15.2","36.2","5.6","22.5","1.7","3.0","10.9","2.1","0.9"],["12:30","1.7","17.8","33.3","5.8","22.2","1.7","3.2","11.4","2.0","1.0"],["12:40","1.7","18.4","33.2","5.9","20.7","1.8","3.5","11.4","2.0","1.3"],["12:50","1.9","19.1","33.2","5.4","21.1","2.3","3.8","10.4","1.9","1.1"],["13:00","2.2","18.2","33.5","5.4","20.9","2.0","4.2","9.8","2.3","1.3"],["13:10","2.5","19.1","33.4","5.4","19.4","1.8","4.5","10.4","2.3","1.2"],["13:20","2.7","18.4","33.2","5.2","19.4","1.8","4.6","11.1","2.5","1.2"],["13:30","3.0","15.5","34.4","4.7","20.0","2.1","4.9","12.0","2.2","1.1"],["13:40","2.9","14.1","35.0","5.1","20.1","2.2","5.3","12.2","2.3","1.0"],["13:50","2.8","13.1","36.2","5.0","20.3","1.9","5.4","12.2","2.3","0.9"],["14:00","2.7","8.9","38.9","6.5","20.6","1.8","5.4","11.9","2.5","0.8"],["14:10","2.6","8.3","39.7","6.3","20.0","1.7","5.7","12.2","2.5","1.0"],["14:20","2.9","7.5","40.0","5.8","19.7","1.8","6.0","12.7","2.7","0.9"],["14:30","2.6","7.3","39.4","6.5","19.7","1.9","6.0","13.0","2.9","0.9"],["14:40","2.7","7.0","39.2","6.9","18.9","2.0","6.3","13.5","2.8","0.7"],["14:50","2.7","6.0","39.3","7.7","19.0","2.2","6.1","13.2","2.8","0.9"],["15:00","2.9","6.1","37.7","9.3","17.8","2.8","5.8","13.4","2.9","1.4"],["15:10","2.9","6.7","37.7","8.8","17.2","3.2","5.9","13.5","2.6","1.3"],["15:20","3.0","5.8","37.7","9.0","16.8","3.5","6.3","14.5","2.4","1.0"],["15:30","3.3","5.0","37.1","8.5","16.7","4.2","6.6","15.0","2.7","1.0"],["15:40","3.4","5.1","36.9","7.5","17.7","4.2","6.6","14.7","2.8","1.1"],["15:50","3.4","5.4","36.5","6.6","18.7","4.3","6.5","14.9","2.9","0.9"],["16:00","2.8","5.9","34.1","8.2","19.8","4.4","7.1","14.3","2.5","0.8"],["16:10","3.0","6.5","33.6","6.9","19.7","4.6","7.0","14.9","2.5","1.2"],["16:20","3.1","6.6","32.6","7.7","19.8","5.0","6.7","14.5","2.6","1.4"],["16:30","3.2","6.2","28.1","10.9","21.8","4.7","6.6","14.8","2.5","1.2"],["16:40","3.3","6.8","27.7","10.5","22.2","4.5","6.7","14.6","2.3","1.3"],["16:50","3.3","7.4","27.2","9.9","22.9","4.6","6.9","14.8","1.8","1.2"],["17:00","3.2","9.8","21.0","11.1","25.1","4.6","7.3","14.9","1.7","1.4"],["17:10","2.9","11.2","19.6","10.2","25.4","4.8","7.6","15.1","1.7","1.4"],["17:20","2.9","12.0","18.4","9.9","26.0","4.7","8.3","14.8","1.6","1.4"],["17:30","2.7","15.3","14.0","10.2","27.0","4.4","8.6","15.0","1.6","1.1"],["17:40","2.6","16.3","13.5","9.9","27.3","4.0","9.2","15.2","1.4","0.7"],["17:50","2.5","17.1","13.1","9.4","26.2","4.2","9.9","15.4","1.4","0.9"],["18:00","2.0","21.0","9.8","8.7","25.1","4.3","12.1","14.8","1.3","0.9"],["18:10","2.2","22.0","9.1","7.2","23.7","4.0","13.3","15.6","1.3","1.6"],["18:20","2.4","21.6","8.7","6.7","23.6","4.1","13.9","16.1","1.3","1.6"],["18:30","2.4","21.0","7.2","7.5","21.8","4.8","15.2","17.1","1.3","1.6"],["18:40","2.2","20.1","6.8","7.1","21.7","5.1","16.2","17.9","1.4","1.5"],["18:50","2.0","19.2","6.2","6.9","21.2","5.4","17.3","18.9","1.3","1.6"],["19:00","2.4","19.6","5.6","6.2","18.8","5.7","20.4","18.7","1.3","1.4"],["19:10","2.3","19.3","5.3","5.6","17.3","6.3","21.8","19.6","1.3","1.2"],["19:20","2.1","17.9","5.3","4.9","16.8","6.2","24.4","19.8","1.2","1.1"],["19:30","1.9","17.8","5.1","3.9","14.9","5.6","28.2","20.2","1.2","1.3"],["19:40","2.2","16.4","5.0","3.6","13.0","5.3","30.8","21.1","1.2","1.4"],["19:50","2.2","15.5","5.0","3.5","12.2","5.1","32.4","21.1","1.4","1.5"],["20:00","2.7","14.1","4.1","3.6","11.1","4.4","38.1","19.0","1.4","1.6"],["20:10","2.8","12.8","3.9","2.8","10.8","4.2","39.7","19.8","1.5","1.8"],["20:20","3.2","12.1","4.0","2.3","9.7","3.9","41.1","20.6","1.3","1.9"],["20:30","3.9","10.8","3.7","2.2","9.1","3.1","42.9","20.7","1.2","2.4"],["20:40","4.2","10.4","3.6","1.7","8.5","2.8","44.0","21.1","1.2","2.4"],["20:50","5.0","9.4","3.5","2.3","8.1","2.6","44.6","20.9","1.2","2.5"],["21:00","8.0","9.6","3.0","2.7","6.9","2.4","42.6","20.9","1.1","2.6"],["21:10","8.9","9.9","2.8","2.0","6.1","2.4","43.7","20.5","1.0","2.7"],["21:20","9.9","9.2","2.7","1.6","5.7","2.1","43.6","21.2","1.0","3.0"],["21:30","12.6","10.0","2.7","1.9","3.8","1.8","42.3","21.1","0.9","2.7"],["21:40","14.5","9.2","2.8","2.2","3.5","1.8","41.1","21.8","0.8","2.3"],["21:50","15.8","8.7","2.8","1.9","4.1","1.2","40.5","21.7","0.6","2.5"],["22:00","27.6","9.7","2.1","2.3","3.8","1.1","31.4","19.0","0.2","2.7"],["22:10","31.4","7.9","2.1","2.2","3.5","1.2","29.7","19.2","0.2","2.7"],["22:20","35.3","7.0","2.0","2.3","2.6","1.1","27.3","19.1","0.4","3.0"],["22:30","43.9","7.7","1.6","2.1","2.9","1.1","20.5","16.9","0.6","2.7"],["22:40","48.0","6.8","1.6","1.8","2.9","0.9","18.5","16.3","0.7","2.7"],["22:50","52.2","6.0","1.6","1.2","2.5","0.9","17.1","15.2","0.6","2.5"],["23:00","64.5","5.3","1.4","1.4","2.1","0.4","11.1","10.9","0.6","2.3"],["23:10","68.1","4.3","1.4","1.5","1.9","0.4","9.8","9.7","0.6","2.2"],["23:20","71.4","3.8","1.4","1.2","2.0","0.4","8.7","8.3","0.5","2.3"],["23:30","77.8","3.2","1.3","0.8","1.3","0.4","6.6","6.2","0.4","2.0"],["23:40","80.4","2.0","1.3","0.8","1.1","0.3","5.7","6.1","0.3","2.0"],["23:50","82.2","1.4","1.3","0.7","1.2","0.3","5.0","5.6","0.3","2.0"],["00:00","87.0","1.5","1.0","0.3","0.6","0.2","2.9","4.2","0.2","2.2"],["00:10","88.4","1.2","0.9","0.3","0.4","0.3","2.4","3.7","0.2","2.2"],["00:20","89.7","1.1","0.9","0.2","0.5","0.2","2.2","3.0","0.2","2.0"],["00:30","90.8","1.1","1.0","0.2","0.3","0.2","1.6","2.7","0.2","1.9"],["00:40","91.9","0.8","1.0","0.1","0.3","0.2","1.5","2.4","0.1","1.8"],["00:50","92.0","0.8","1.0","0.2","0.3","0.2","1.5","2.2","0.1","1.8"],["01:00","93.1","0.6","1.0","0.2","0.0","0.3","1.2","1.8","0.0","1.6"],["01:10","93.4","0.5","1.0","0.2","0.1","0.2","1.2","1.8","0.0","1.7"],["01:20","93.5","0.4","1.0","0.2","0.1","0.1","1.0","2.0","0.0","1.7"],["01:30","94.0","0.4","1.1","0.0","0.0","0.1","1.0","1.7","0.0","1.7"],["01:40","94.1","0.4","1.0","0.0","0.0","0.1","1.0","1.6","0.0","1.7"],["01:50","94.3","0.4","1.0","0.0","0.1","0.1","1.0","1.5","0.0","1.6"],["02:00","95.0","0.2","0.9","0.1","0.1","0.2","0.7","1.1","0.0","1.7"],["02:10","94.9","0.4","0.9","0.1","0.1","0.2","0.6","1.1","0.0","1.7"],["02:20","95.2","0.3","0.9","0.1","0.1","0.1","0.6","1.0","0.0","1.7"],["02:30","95.9","0.3","0.9","0.1","0.1","0.1","0.4","0.6","0.0","1.6"],["02:40","95.8","0.4","0.9","0.0","0.1","0.1","0.4","0.6","0.0","1.6"],["02:50","95.8","0.3","0.9","0.0","0.1","0.1","0.4","0.6","0.0","1.7"],["03:00","95.9","0.3","0.9","0.0","0.2","0.1","0.3","0.5","0.0","1.8"],["03:10","95.9","0.3","0.8","0.1","0.2","0.1","0.3","0.4","0.0","1.8"],["03:20","95.6","0.6","0.8","0.0","0.3","0.2","0.3","0.3","0.0","1.8"],["03:30","95.3","0.7","0.8","0.0","0.3","0.3","0.2","0.4","0.0","2.0"],["03:40","95.0","0.7","0.8","0.0","0.3","0.3","0.2","0.6","0.0","2.0"],["03:50","94.8","0.9","0.8","0.0","0.4","0.2","0.2","0.6","0.0","2.0"]];
	</script>

	<script>
		function getLogForTimeFromCSV(logCsv, timeString) {
			for (const rowArrayIndex in logCsv) {
				const currentRow = logCsv[rowArrayIndex]

				if (currentRow[0] === timeString) {
					return currentRow
				}
			}
			return null
		}

		console.log(weekdayLogArray);
			
		let DateTime = luxon.DateTime;

		let dayOfTheWeek = DateTime.now().weekday
		let isWeekday = dayOfTheWeek <= 5
		
		let datetimeNow = DateTime.now()
		// console.log(datetimeNow.hour, datetimeNow.minute)

		let minuteToNearestTen = Math.round(datetimeNow.minute / 10) * 10;
		let hourString

		if (minuteToNearestTen === 60) {
			let roundedHourValue = (datetimeNow.hour + 1) % 24;
			hourString = roundedHourValue.toString().padStart(2, '0') + ':'; 
			minuteToNearestTen = 0;
		} else {
			hourString = datetimeNow.toFormat('HH:');
		}
		

		let fullTimeString = hourString + minuteToNearestTen.toString().padStart(2, '0'); 

		console.log(isWeekday, fullTimeString)

		let currentTimeLog = getLogForTimeFromCSV(weekdayLogArray, fullTimeString)
		console.log(currentTimeLog)

		let percentageCurrentlyAwake = 100 - Math.round(parseFloat(currentTimeLog[1]))
		let percentageCurrentlyAwakeText = percentageCurrentlyAwake.toString()
		
		
		
		$('#percentageHeader').text(`${percentageCurrentlyAwake}%`)

		// $('#percentageHeader').ready(function() {
		// 	console.log(weekdayLogArray);
			
		// 	let DateTime = luxon.DateTime;

		// 	let dayOfTheWeek = DateTime.now().weekday
		// 	let isWeekday = dayOfTheWeek <= 5
			
		// 	let datetimeNow = DateTime.now()
		// 	// console.log(datetimeNow.hour, datetimeNow.minute)

		// 	let minuteToNearestTen = Math.round(datetimeNow.minute / 10) * 10;
		// 	let hourString = datetimeNow.toFormat('HH:');

		// 	let fullTimeString = hourString + minuteToNearestTen.toString().padStart(2, '0'); 

		// 	console.log(isWeekday, fullTimeString)

		// 	let currentTimeLog = getLogForTimeFromCSV(weekdayLogArray, fullTimeString)
		// 	let percentageCurrentlyAwake = 100 - Math.round(parseFloat(currentTimeLog[1]))
		// 	let percentageCurrentlyAwakeText = percentageCurrentlyAwake.toString()
		// 	// console.log(currentTimeLog)
			
			
		// 	$('#percentageHeader').text(`${percentageCurrentlyAwake}%`)
		// })
		

		// Papa.parse('./data/weekdayActivityLog.csv', {
		// 	download: true,
		// 	complete: function(results) {
		// 		console.log(results.data);
				
		// 		let DateTime = luxon.DateTime;

		// 		let dayOfTheWeek = DateTime.now().weekday
		// 		let isWeekday = dayOfTheWeek <= 5
				
		// 		let datetimeNow = DateTime.now()
		// 		// console.log(datetimeNow.hour, datetimeNow.minute)

		// 		let minuteToNearestTen = Math.round(datetimeNow.minute / 10) * 10;
		// 		let hourString = datetimeNow.toFormat('HH:');

		// 		let fullTimeString = hourString + minuteToNearestTen.toString().padStart(2, '0'); 

		// 		console.log(isWeekday, fullTimeString)

		// 		let currentTimeLog = getLogForTimeFromCSV(results.data, fullTimeString)
		// 		let percentageCurrentlyAwake = 100 - Math.round(parseFloat(currentTimeLog[1]))
		// 		let percentageCurrentlyAwakeText = percentageCurrentlyAwake.toString()
		// 		// console.log(currentTimeLog)
				
				
		// 		$('#percentageHeader').text(`${percentageCurrentlyAwake}%`)
		// 	}

		// })

	</script>

	<style>
		body {
			/* background-color: bisque; */
			background-color: slategrey;
			font-family: sans-serif;
		}

		#percentageHeader {
			font-size: 250px;
		}
	</style>
</body>
</html>